<!DOCTYPE html>
<html>

<head>
  <title>¯\_(ツ)_/¯</title>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
    var areaSize=3;
    var turn = 1;
    var winner = 0;
    var access = 1;
    var area = [];



    // function GetTableSize() {
    //     var table = document.getElementById("#GameTable");
    //     var tableSize = table.rows.length;
    //     var cells = document.getElementsByTagName('td');
    //     for (var i = 0; i < cells.length; i++) {
    //     cells[i].id = (i);
    //     }
    //     return tableSize;
    // }

    function generateTable(areaSize){
        document.write("<table>");
        var i = 0;
        for(var x = 0; x < areaSize; x++){
            document.write("<tr id='r'"+x+"'>");
            for(var y= 0; y < areaSize; y ++){
                document.write("<td id='t"+i+"'>");                
                document.write("</td>");
                i++;
            }
            document.write("</tr>");
            
        }
        document.write("</table>");
    }


    $(document).ready(function () {
        $('td').hover(function () {
        if (turn % 2 != 0) {$(this).css({"background-color": "rgba(0,255,255,0.1)"});}
        else {$(this).css({"background-color": "rgba(255,0,255,0.1)"});}
        });
        $('td').click(function () {
        if ($(this).text() != "O" && $(this).text() != "X" && access == 1) {
            var Index = $(this).attr('id').substr(1);

            if (turn % 2 != 0) {$(this).text("X"); area[Index] = 2;}
            else {$(this).text("O"); area[Index] = 1;}
            console.log("Turn" + turn);
            console.log("Area" + area);
            turn++;
            check();
        }
        else if (access == 0) {reset();}
        });

        $('td').mouseout(function () {
        $(this).css({"background-color": "white"});
        });
    });

    function check() {
        // horizontal:  0,1,2; 3,4,5; 6,7,8;
        if ((area[0] + area[1] + area[2]) == 3) {console.log("horizontal first O"); winner = 1;}
        if ((area[0] + area[1] + area[2]) == 6) {console.log("horizontal first X"); winner = 2;}

        if ((area[3] + area[4] + area[5]) == 3) {console.log("horizontal second O"); winner = 1;}
        if ((area[3] + area[4] + area[5]) == 6) {console.log("horizontal second X"); winner = 2;}

        if ((area[6] + area[7] + area[8]) == 3) {console.log("horizontal third O"); winner = 1;}
        if ((area[6] + area[7] + area[8]) == 6) {console.log("horizontal third X"); winner = 2;}

        //vertical: 0,3,6; 1,4,7; 2,5,8;
        if ((area[0] + area[3] + area[6]) == 3) {console.log("vertical first O"); winner = 1;}
        if ((area[0] + area[3] + area[6]) == 6) {console.log("vertical first X"); winner = 2;}

        if ((area[1] + area[4] + area[7]) == 3) {console.log("vertical second O"); winner = 1;}
        if ((area[1] + area[4] + area[7]) == 6) {console.log("vertical second X"); winner = 2;}

        if ((area[2] + area[5] + area[8]) == 3) {console.log("vertical third O"); winner = 1;}
        if ((area[2] + area[5] + area[8]) == 6) {console.log("vertical third X"); winner = 2;}

        // diagonal: 0,4,8; 2,4,6;
        if ((area[0] + area[4] + area[8]) == 3) {console.log("diagonal first O"); winner = 1;}
        if ((area[0] + area[4] + area[8]) == 6) {console.log("diagonal first X"); winner = 2;}

        if ((area[2] + area[4] + area[6]) == 3) {console.log("diagonal second O"); winner = 1;}
        if ((area[2] + area[4] + area[6]) == 6) {console.log("diagonal second X"); winner = 2;}


        if (winner == 1) {$(document).ready(function () {$('p#result').text("O Wins!"); access = 0;});}
        else if (winner == 2) {$(document).ready(function () {$('p#result').text("X Wins!"); access = 0;});}
    }
    function reset() {

        $(document).ready(function () {
        $('td').each(function () {
            $(this).text("");
        })
        $('p#result').text("");
        });
        area = [];
        winner = 0;
        access = 1;
    }
    function showUp() {
        for (var x = 1; x < area.length + 1; x++) {
        console.log(area[x - 1]);
        if (x % 3 == 0) {console.log("\n\n");}
        }
    }


</script>
<style>
  * {
    margin: 0;
    padding: 0;
    border-spacing: 1;
  }

  body,
  html {
    width: 100%;
    height: 100%;
    overflow-x: hidden;
    overflow-y: hidden;
  }

  div.wrapper {
    display: flex;
    flex-direction: row;
    width: 100%;
    height: 100%;
  }

  div.left {
    width: 50%;
    height: 100%;
    margin-left: 10px;
    margin-top: 5px;
  }

  div.right {
    width: 50%;
    height: 100%;
    display: flex;
    justify-content: start;
    align-items: center;
    font-size: 30px;
    color: red;
  }

  table {
    text-align: center;
    border-bottom: 1px solid black;
    border-left: 1px solid black;
    border-style: none;
    width: 500px;
    height: 600px;
    font-size: 40px;
    margin-bottom: 5px;

  }

  td {
    border: 1px solid black;
    width: 40px;
    height: 40px;
  }
</style>

<body>
  <div class="wrapper">
    <div class="left">
      <p style="margin-bottom:0;">TicTacToe</p>
      
      <button onclick="reset()">Reset!</button>
      <button onclick="showUp()">Show</button>
      <button onclick="generateTable(areaSize)">Generate</button>
    </div>
    <div class="right">
      <p id="result" style="text-align: center;"></p>
    </div>
  </div>
</body>

</html>